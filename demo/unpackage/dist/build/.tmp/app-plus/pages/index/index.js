(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{1387:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},"19df":function(e,t,n){"use strict";n.r(t);var a=n("1387"),i=n("f55e");for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);n("54d2");var o=n("2877"),c=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,null,null);t["default"]=c.exports},"3d9f":function(e,t,n){"use strict";(function(e){n("b52e"),n("921b");a(n("66fd"));var t=a(n("19df"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"517b":function(e,t,n){},"54d2":function(e,t,n){"use strict";var a=n("517b"),i=n.n(a);i.a},"80d4":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i,r=n("2f62"),o=d(n("880c")),c=n("9122"),s=n("355e");n("3be5");function d(e){return e&&e.__esModule?e:{default:e}}function u(e){return h(e)||f(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function h(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){v(e,t,n[t])})}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={},m=(a={data:function(){return{showDialog:!1,cWidth:"",cHeight:"",tips:"",pixelRatio:1,serverData:"",itemCount:10,sliderMax:50,devices:[]}},computed:g({},(0,r.mapState)(["currentAddress","devices","currentUser"])),onLoad:function(){var t=this;e.showLoading({}),e.setNavigationBarTitle({title:"首页"}),(0,s.login)().then(function(e){return t.$store.commit("setCurrentUser",e),(0,c.listFamilys)(e.OpenId)}).then(function(n){if(n){if(!n.data.data||0!=n.data.data.length)return t.$store.commit("setAddress",n.data.data),(0,c.listFamilyBindDevices)(n.data.data[0].id);e.navigateTo({url:"../address/addAddress"})}}).then(function(n){if(n){var a;if(n.data.data&&n.data.data.length>0)t.$store.commit("setDevices",n.data.data),t.devices=[],(a=t.devices).push.apply(a,u(n.data.data));else t.$store.commit("setDevices",[]),t.devices=[];e.hideLoading()}}).catch(function(t){"getUserInfo:fail scope unauthorized"==t.errMsg&&e.navigateTo({url:"../login/index",success:function(t){e.hideLoading()}})}),i=this,e.createSelectorQuery().select(".index-page").boundingClientRect(function(e){t.cWidth=e.width,t.cHeight=200,t.fillData()}).exec()},onShow:function(){var e=this;this.showDialog=!1,this.currentAddress&&(0,c.listFamilyBindDevices)(this.currentAddress.id).then(function(t){var n;t.data.data&&t.data.data.length>0?(e.$store.commit("setDevices",t.data.data),e.devices=[],(n=e.devices).push.apply(n,u(t.data.data))):(e.$store.commit("setDevices",[]),e.devices=[])})},onReady:function(){},methods:g({},(0,r.mapMutations)(["setCurrentUser","setAddress"]),{OnWechatAuthorized:function(){e.navigateTo({url:"../login/login"})},onGetUserInfo:function(){e.navigateTo({url:"../login/login"})},switchAddress:function(){e.navigateTo({url:"../address/addressList"})},addDevice:function(){e.navigateTo({url:"../device/addDevice"})},fillData:function(){var e={categories:[],series:[]};e.categories=[0,3,6,9,12,15,18,21,23],e.series=[{name:"mine",data:[20,25,25,30,20,25,25,30,20],color:"#1890ff",type:"line",show:!0,pointShape:"circle",legendShape:"line"},{name:"average",data:[15,20,21,19,15,20,21,19,15],color:"#2fc25b",type:"line",show:!0,pointShape:"circle",legendShape:"line"},{name:"out_door",data:[10,15,17,8,10,15,17,8,10],color:"#facc14",type:"line",show:!0,pointShape:"circle",legendShape:"line"}],this.showLineA("canvasLineA",e)},showLineA:function(e,t){var n;p[e]=new o.default((n={$this:i,canvasId:e,type:"line",fontSize:11,padding:[15,15,15,15],legend:{show:!0,padding:5,lineHeight:11,margin:5,format:function(e){return e+"μg/m³"}},dataLabel:!1,dataPointShape:!1,background:"#FFFFFF",pixelRatio:i.pixelRatio,categories:t.categories,series:t.series,animation:!1,enableScroll:!0,xAxis:{itemCount:30,scrollAlign:"left"},yAxis:{min:10,max:60,format:function(e){return Math.floor(e)}},width:i.cWidth*i.pixelRatio,height:i.cHeight*i.pixelRatio},v(n,"dataLabel",!0),v(n,"dataPointShape",!0),n))},touchLineA:function(e){p["canvasLineA"].scrollStart(e)},moveLineA:function(e){p["canvasLineA"].scroll(e)},touchEndLineA:function(e){p["canvasLineA"].scrollEnd(e),p["canvasLineA"].showToolTip(e,{format:function(e,t){return t+" "+e.name+":"+e.data}})}})},v(a,"computed",g({},(0,r.mapState)(["currentAddress","currentUser"]))),v(a,"mounted",function(){e.setNavigationBarTitle({title:"首页"})}),a);t.default=m}).call(this,n("6e42")["default"])},f55e:function(e,t,n){"use strict";n.r(t);var a=n("80d4"),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t["default"]=i.a}},[["3d9f","common/runtime","common/vendor"]]]);